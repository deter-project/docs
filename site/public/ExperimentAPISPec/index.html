<html>
<head>
  <title></title>
</head>
<body>
  <h1></h1>
  

<p>[[TOC]]</p>

<h1 id="experiments:d3c9ccbbda652bbc20dbe84614241769">Experiments</h1>

<p>(Adopted from the NewAPI, need to modify)</p>

<p>The experiment interface controls managing experiment definitions and realizing experiments (allocating and initializing resources). The experiment definition is in some flux, which is reflected in this section.</p>

<h2 id="viewing-experiments:d3c9ccbbda652bbc20dbe84614241769">Viewing Experiments</h2>

<p>One or more experiments can be viewed by an authorized user assuming that user has the proper permissions.  The creator of a project owns it and that userid scopes its name.  That is an experiment&rsquo;s name is a pair: (owner, name).  This allows experiments to be instantiated in different projects.</p>

<ul>
<li><em>Service:</em> Experiments</li>
<li><em>Operation:</em> viewExperiments</li>

<li><p><em>Input Parameters:</em></p>

<ul>
<li>Userid - the user making the request</li>
<li>ExperimentRE - a string containing a regular expression matched against project names (may be omitted)</li>
<li>Owner - a string holding the owner of experiments to find (may be omitted)</li>
<li>Components - a 32-bit integer containing a mask of fields to include

<ul>
<li>EXPERIMENT_TOPOLOGY - include the topology</li>
<li>EXPERIMENT_ACTIONS - include the actions</li>
<li>EXPERIMENT_CONSTRAINTS - include constraints</li>
<li>EXPERIMENT_DATACOLLECTION - include data collection</li>
<li>EXPERIMENT_RESOURCES - include resources needed or allocated</li>
<li>EXPERIMENT_CONTAINERS - include components if realized</li>
<li>EXPERIMENT_LOG - include realization log and fault</li>
<li>EXPERIMENT_PERMISSIONS - include project permissions</li>
</ul></li>
<li>TopologyFormat - an optional 32-bit int naming the topology format

<ul>
<li>TOPOLOGY_TOPDL - return a topdl file</li>
<li>TOPOLOGY_NS2 - return an ns2 file</li>
</ul></li>
<li>TopologyFilter - an optional filter for limiting scope of the topology file format TBD</li>
<li>ActionFormat - an optional 32-bit int naming the action file format (values TBD)</li>
<li>ActionFilter - an optional filter for limiting scope of the constraint file format TBD</li>
<li>ConstraintFormat - an optional 32-bit int naming the constraint format (values TBD)</li>
<li>ConstraintFilter - an optional filter for limiting scope of the constraint file format TBD</li>
<li>DataCollectionFormat - an optional 32-bit int naming the data collection format (values TBD)</li>
<li>DataCollectionFilter - an optional filter for limiting scope of the data collection file format TBD</li>
<li>ResourceFilter - an optional filter for limiting scope of the resouces returned format TBD</li>
<li>ContainerFilter - an optional filter for limiting scope of the constainers returned format TBD</li>
</ul></li>

<li><p><em>Return Values:</em></p>

<ul>
<li>One or more structures with the following fields

<ul>
<li>Name - a string containing the experiment name</li>
<li>Owner - a string containing the owner&rsquo;s userid</li>
<li>Project - an optional string. If present the experiment is realized under this project</li>
<li>Topology - an optional file describing the experiment topology subject to filters and format constraints</li>
<li>Actions - an optional file describing the experiment actions subject to filters and format constraints</li>
<li>Constraints - an optional file describing the experiment constraints subject to filters and format constraints</li>
<li>DataCollection - an optional file describing the experiment data collection subject to filters and format constraints</li>
<li>Containers - an optional list with the following fields describing the containers in the experimnet, if it is realized. Subject to filtering.</li>
<li>Name - the container name</li>
<li>State - a string indicating state (Up, Down, Configured, Pinned, None)</li>
<li>Type - a string indicating the container type</li>
<li>Resources - an optional list of structures giving resources needed by or allocated to the experiment, subject to filtering.</li>
<li>Name - resource name</li>
<li>Type - resource type</li>
<li>State - a string, one of</li>
<li>&ldquo;Unrealized&rdquo;, &ldquo;Realized&rdquo;, &ldquo;Changing&rdquo;, &ldquo;Pinned&rdquo; (Pinned means that some modification other than realization is underway)</li>
<li>StateDetail - a string giving additional state information.  values TBD</li>
<li>Log - an optional file containing messages from the last realization attempt for debugging</li>
<li>FaultInfo - an optional structure containing the high level error message (if any) from the last realization.  It contains the error fields from a DeterFault:</li>
<li>ErrorCode - a 32-bit integer encoding the type of error.  Constants are available in the <a href="http://www.isi.edu/~faber/tmp/doc/net/deterlab/testbed/api/DeterFault.html">javadoc for DeterFault</a>.  Values are:

<ul>
<li>access - access denied</li>
<li>request - bad request</li>
<li>internal - internal server error</li>
</ul></li>
<li>ErrorString - a string describing the broad error</li>
<li>DetailString - a string describing the details that caused the error</li>
<li>ReadProjects - a list of project names allowed to read this experiment</li>
<li>WriteProjects - a list of project names allowed to modify this experiment</li>
<li>RealizeProjects - a list of project names allowed to realize this experiment</li>
</ul></li>
</ul></li>
</ul>

<h2 id="creating-and-deleting-experiments:d3c9ccbbda652bbc20dbe84614241769">Creating and Deleting Experiments</h2>

<p>An experiment is created using:</p>

<ul>
<li><em>Service:</em> Experiments</li>
<li><em>Operation:</em> createExperiment</li>
<li><em>Input Parameters:</em>

<ul>
<li>Userid - the user making the request (the owner on success)</li>
<li>Name - a string containing a new experiment&rsquo;s name</li>
<li>Topology - an optional file describing the experiment topology</li>
<li>Actions - an optional file describing the experiment actions</li>
<li>Constraints - an optional file describing the experiment constraints s</li>
<li>DataCollection - an optional file describing the experiment data collection</li>
<li>ReadProjects - a list of project names allowed to read this experiment</li>
<li>WriteProjects - a list of project names allowed to modify this experiment</li>
<li>RealizeProjects - a list of project names allowed to realize this experiment</li>
</ul></li>
<li><em>Return Values:</em>

<ul>
<li>None</li>
</ul></li>
</ul>

<p>An experiment is modified using:</p>

<ul>
<li><em>Service:</em> Experiments</li>
<li><em>Operation:</em> modifyExperiment</li>
<li><em>Input Parameters:</em>

<ul>
<li>Userid - the user making the request (the owner on success)</li>
<li>Owner - the experiment owner</li>
<li>Name - a string containing the experiment&rsquo;s name</li>
<li>Topology - an optional file describing the experiment topology</li>
<li>Actions - an optional file describing the experiment actions</li>
<li>Constraints - an optional file describing the experiment constraints s</li>
<li>DataCollection - an optional file describing the experiment data collection</li>
<li>ReadProjects - a list of project names allowed to read this experiment</li>
<li>WriteProjects - a list of project names allowed to modify this experiment</li>
<li>RealizeProjects - a list of project names allowed to realize this experiment</li>
</ul></li>
<li><em>Return Values:</em>

<ul>
<li>None</li>
</ul></li>
</ul>

<p>Omitted arguments are not overwritten.  To delete a field supply an empty description.</p>

<p>There will also be filter-based modification interfaces, but these are TBD.</p>

<p>An experiment is deleted using:</p>

<ul>
<li><em>Service:</em> Experiments</li>
<li><em>Operation:</em> removeExperiment</li>
<li><em>Input Parameters:</em>

<ul>
<li>Userid - the user making the request (the owner on success)</li>
<li>Owner - the experiment owner</li>
<li>Name - a string containing the experiment to delete</li>
</ul></li>
<li><em>Return Values:</em>

<ul>
<li>None</li>
</ul></li>
</ul>

<p>After <code>removeExperiment</code> succeeds, experiment state is removed from the testbed completely.</p>

<h2 id="realizing-and-releasing-experiments:d3c9ccbbda652bbc20dbe84614241769">Realizing and Releasing Experiments</h2>

<p>To realize an experiment use:</p>

<ul>
<li><em>Service:</em> Experiments</li>
<li><em>Operation:</em> realizeExperiment</li>
<li><em>Input Parameters:</em>

<ul>
<li>Userid - the user making the request (the owner on success)</li>
<li>Owner - the experiment owner</li>
<li>Name - a string containing the experiment to realize</li>
<li>Notify - a flag, if true send the user a notification when realization is complete</li>
</ul></li>
<li><em>Return Values:</em>

<ul>
<li>None</li>
</ul></li>
</ul>

<p>The user can either poll the experiment using <code>viewExperiments</code> and examining the <code>StateDetail</code> field or poll for a notification that the realization is complete.</p>

<p>If the realization fails - as indicated by the <code>State</code> variable in a <code>viewExperiments</code> response, the <code>Log</code> and <code>FaultInfo</code> fields characterize the error.</p>

<p>To release an experiment&rsquo;s resources:</p>

<ul>
<li><em>Service:</em> Experiments</li>
<li><em>Operation:</em> releaseExperiment</li>
<li><em>Input Parameters:</em>

<ul>
<li>Userid - the user making the request (the owner on success)</li>
<li>Owner - the experiment owner</li>
<li>Name - a string containing the experiment to release</li>
<li>Notify - a flag, if true send the user a notification when realization is complete</li>
</ul></li>
<li><em>Return Values:</em>

<ul>
<li>None</li>
</ul></li>
</ul>

<p>After <code>releaseExperiment</code> succeeds, experiment state remains in the testbed, but containers are stopped and resources are returned to the testbed.</p>

<script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>
