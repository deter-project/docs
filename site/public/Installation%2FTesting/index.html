<html>
<head>
  <title></title>
</head>
<body>
  <h1></h1>
  <p>The DETER distribution includes a small set of tests
to verify basic functionality of the newly-installed testbed.
Once <em>elabman</em> has created the first user,
that user may start the tests on the <em>users</em> node
from within the build user&rsquo;s check-out source tree.
First:</p>

<pre><code>cd ~&lt;builduser&gt;/testbed/testsuite/deter
</code></pre>

<p>Edit the third line of tbcheck so <code>tbsrc</code> refers to the full path for ~<builduser>/testbed.</p>

<pre><code>set tbsrc /usr/testbed/src/testbed
</code></pre>

<p>Then</p>

<pre><code>./tbcheck
</code></pre>

<p>should produce (after a fair amount of other logging)</p>

<pre><code>basic2 passed all phases
basic passed all phases
toofast failed preparse
miniTbcmd2 passed all phases
cbr passed all phases
basic3 passed all phases
</code></pre>

<p><em>tbcheck</em> is a tcl expect script which exercises the testbed
using this short series of experiments,
attempting to: swap each in;
test link behavior; verify other properties of the instantiated
experiment; and finally swap out.
Given a sufficient quantity of experimental nodes, and a correctly-functioning testbed,
only one of the tests is designed to fail.</p>

<ul>
<li><em>basic&rdquo; checks that an experimental node&rsquo;s group file includes the project group. It also includes two links with different delays, and one at a lower bitrate than the others. &ldquo;basic</em> should pass all phases.</li>
<li><em>basic2</em> checks than an experimental node properly mounted the user&rsquo;s home directory, and should pass all phases.</li>
<li><em>basic3</em> performs the same group file check as &ldquo;basic&rdquo; but will swap in on a testbed with as few as three experimental nodes.</li>
<li><em>cbr</em> includes a number of links with delay, traffic agents, and link events.  The test verifies that the testbed correctly creates a log file for one of the events.</li>
<li><em>miniTbcmd2</em> includes a pair of tar archives to be extracted on one of the experimental nodes, and a startup command for that node.</li>
<li><em>toofast</em> is supposed to fail to swap-in (according to emulab) because one of the links is too fast, but in practice fails due to a parsing error. This is the only one of the five tests which is intended to fail.</li>
</ul>

<p>The full series requires at least six experimental nodes,
assuming one node available for delay use has four experimental interfaces.
<em>basic2&rdquo; and &ldquo;basic3</em> require two and three experimental nodes, respectively.</p>

<script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>
